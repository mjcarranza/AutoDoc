{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/mario/Desktop/AutoDocIA/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport * as vision from '@google-cloud/vision';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nexport class CustomerSupportComponent {\n  detectObjectsInImage(imageUrl) {\n    return _asyncToGenerator(function* () {\n      try {\n        const client = new vision.ImageAnnotatorClient();\n        const [objectLocalizationResult] = yield client.objectLocalization(imageUrl);\n        const objects = objectLocalizationResult.localizedObjectAnnotations;\n        const results = objects?.map(object => {\n          const vertices = object.boundingPoly?.normalizedVertices;\n          return {\n            description: object.name,\n            score: object.score,\n            vertices: vertices?.map(v => ({\n              x: v.x,\n              y: v.y\n            }))\n          };\n        });\n        return results;\n      } catch (error) {\n        console.error('Error:', error);\n        return [];\n      }\n    })();\n  }\n\n}\n\nCustomerSupportComponent.ɵfac = function CustomerSupportComponent_Factory(t) {\n  return new (t || CustomerSupportComponent)();\n};\n\nCustomerSupportComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: CustomerSupportComponent,\n  selectors: [[\"app-customer-support\"]],\n  decls: 26,\n  vars: 1,\n  consts: [[\"href\", \"https://unpkg.com/tailwindcss@^2/dist/tailwind.min.css\", \"rel\", \"stylesheet\"], [1, \"relative\", \"min-h-screen\", \"flex\", \"items-center\", \"justify-center\", \"bg-gray-50\", \"py-12\", \"px-4\", \"sm:px-6\", \"lg:px-8\", \"bg-gray-500\", \"bg-no-repeat\", \"bg-cover\", \"relative\", \"items-center\", 2, \"background-image\", \"url(https://images.unsplash.com/photo-1621243804936-775306a8f2e3?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80)\"], [1, \"absolute\", \"bg-black\", \"opacity-60\", \"inset-0\", \"z-0\"], [1, \"sm:max-w-lg\", \"w-full\", \"p-10\", \"bg-white\", \"rounded-xl\", \"z-10\"], [1, \"text-center\"], [1, \"mt-5\", \"text-3xl\", \"font-bold\", \"text-gray-900\"], [1, \"mt-2\", \"text-sm\", \"text-gray-400\"], [\"action\", \"#\", \"method\", \"POST\", 1, \"mt-8\", \"space-y-3\"], [1, \"grid\", \"grid-cols-1\", \"space-y-2\"], [1, \"flex\", \"items-center\", \"justify-center\", \"w-full\"], [1, \"flex\", \"flex-col\", \"rounded-lg\", \"border-4\", \"border-dashed\", \"w-full\", \"h-60\", \"p-10\", \"group\", \"text-center\"], [1, \"h-full\", \"w-full\", \"text-center\", \"flex\", \"flex-col\", \"items-center\", \"justify-center\", \"items-center\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"fill\", \"none\", \"viewBox\", \"0 0 24 24\", \"stroke\", \"currentColor\", 1, \"w-10\", \"h-10\", \"text-blue-400\", \"group-hover:text-blue-600\"], [\"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", \"stroke-width\", \"2\", \"d\", \"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12\"], [\"height\", \"200\", 3, \"src\"], [1, \"pointer-none\", \"text-gray-500\"], [\"type\", \"file\", 1, \"hidden\", 3, \"change\"], [1, \"text-sm\", \"text-gray-300\"], [1, \"my-5\", \"w-full\", \"flex\", \"justify-center\", \"bg-blue-500\", \"text-gray-100\", \"p-4\", \"rounded-full\", \"tracking-wide\", \"font-semibold\", \"focus:outline-none\", \"focus:shadow-outline\", \"hover:bg-blue-600\", \"shadow-lg\", \"cursor-pointer\", \"transition\", \"ease-in\", \"duration-300\", 3, \"click\"]],\n  template: function CustomerSupportComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelement(0, \"link\", 0);\n      i0.ɵɵelementStart(1, \"div\", 1);\n      i0.ɵɵelement(2, \"div\", 2);\n      i0.ɵɵelementStart(3, \"div\", 3)(4, \"div\", 4)(5, \"h2\", 5);\n      i0.ɵɵtext(6, \" Selecci\\u00F3n de imagen! \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(7, \"p\", 6);\n      i0.ɵɵtext(8, \"Seleccione una imagen para analizar y obtener la soluci\\u00F3n al problema que representa.\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(9, \"form\", 7)(10, \"div\", 8)(11, \"div\", 9)(12, \"label\", 10)(13, \"div\", 11);\n      i0.ɵɵnamespaceSVG();\n      i0.ɵɵelementStart(14, \"svg\", 12);\n      i0.ɵɵelement(15, \"path\", 13);\n      i0.ɵɵelementEnd();\n      i0.ɵɵnamespaceHTML();\n      i0.ɵɵelement(16, \"img\", 14);\n      i0.ɵɵelementStart(17, \"p\", 15);\n      i0.ɵɵtext(18, \"Seleccione una imagen desde su computadora.\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(19, \"input\", 16);\n      i0.ɵɵlistener(\"change\", function CustomerSupportComponent_Template_input_change_19_listener($event) {\n        return ctx.onFileSelected($event);\n      });\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵelementStart(20, \"p\", 17)(21, \"span\");\n      i0.ɵɵtext(22, \"Tipo de arcivo soportado: Im\\u00E1genes\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(23, \"div\")(24, \"button\", 18);\n      i0.ɵɵlistener(\"click\", function CustomerSupportComponent_Template_button_click_24_listener() {\n        return ctx.detectObjects();\n      });\n      i0.ɵɵtext(25, \" Analizar Imagen \");\n      i0.ɵɵelementEnd()()()()();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(16);\n      i0.ɵɵproperty(\"src\", ctx.selectedImage, i0.ɵɵsanitizeUrl);\n    }\n  },\n  dependencies: [i1.ɵNgNoValidate, i1.NgControlStatusGroup, i1.NgForm],\n  styles: [\".push-right[_ngcontent-%COMP%] {\\r\\n    margin-left: 90%;\\r\\n}\\r\\n\\r\\n.person[_ngcontent-%COMP%] {\\r\\n    font-style: italic;\\r\\n    font-weight: bold;\\r\\n    color: purple;\\r\\n}\\r\\n\\r\\n.bot[_ngcontent-%COMP%] {    \\r\\n    font-weight: bold; \\r\\n    color: darkgreen;\\r\\n}\\r\\n\\r\\n.frame-box[_ngcontent-%COMP%]{\\r\\n    border: dotted 2px orange; padding: 20px;\\r\\n    min-height: 400px;\\r\\n    max-height: 400px;\\r\\n    overflow-y: scroll\\r\\n}\\r\\n\\r\\n.padding[_ngcontent-%COMP%]{\\r\\n    padding: 5px;\\r\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImN1c3RvbWVyLXN1cHBvcnQuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtJQUNJLGdCQUFnQjtBQUNwQjs7QUFFQTtJQUNJLGtCQUFrQjtJQUNsQixpQkFBaUI7SUFDakIsYUFBYTtBQUNqQjs7QUFFQTtJQUNJLGlCQUFpQjtJQUNqQixnQkFBZ0I7QUFDcEI7O0FBRUE7SUFDSSx5QkFBeUIsRUFBRSxhQUFhO0lBQ3hDLGlCQUFpQjtJQUNqQixpQkFBaUI7SUFDakI7QUFDSjs7QUFHQTtJQUNJLFlBQVk7QUFDaEIiLCJmaWxlIjoiY3VzdG9tZXItc3VwcG9ydC5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLnB1c2gtcmlnaHQge1xyXG4gICAgbWFyZ2luLWxlZnQ6IDkwJTtcclxufVxyXG5cclxuLnBlcnNvbiB7XHJcbiAgICBmb250LXN0eWxlOiBpdGFsaWM7XHJcbiAgICBmb250LXdlaWdodDogYm9sZDtcclxuICAgIGNvbG9yOiBwdXJwbGU7XHJcbn1cclxuXHJcbi5ib3QgeyAgICBcclxuICAgIGZvbnQtd2VpZ2h0OiBib2xkOyBcclxuICAgIGNvbG9yOiBkYXJrZ3JlZW47XHJcbn1cclxuXHJcbi5mcmFtZS1ib3h7XHJcbiAgICBib3JkZXI6IGRvdHRlZCAycHggb3JhbmdlOyBwYWRkaW5nOiAyMHB4O1xyXG4gICAgbWluLWhlaWdodDogNDAwcHg7XHJcbiAgICBtYXgtaGVpZ2h0OiA0MDBweDtcclxuICAgIG92ZXJmbG93LXk6IHNjcm9sbFxyXG59XHJcblxyXG5cclxuLnBhZGRpbmd7XHJcbiAgICBwYWRkaW5nOiA1cHg7XHJcbn0iXX0= */\"]\n});","map":{"version":3,"mappings":";AAMA,OAAO,KAAKA,MAAZ,MAAwB,sBAAxB;;;AAOA,OAAM,MAAOC,wBAAP,CAA+B;EAC7BC,oBAAoB,CAACC,QAAD,EAAiB;IAAA;MACzC,IAAI;QACF,MAAMC,MAAM,GAAG,IAAIJ,MAAM,CAACK,oBAAX,EAAf;QACA,MAAM,CAACC,wBAAD,UAAmCF,MAAM,CAACG,kBAAP,CAA0BJ,QAA1B,CAAzC;QACA,MAAMK,OAAO,GAAGF,wBAAwB,CAACG,0BAAzC;QAEA,MAAMC,OAAO,GAAGF,OAAO,EAAEG,GAAT,CAAcC,MAAD,IAAW;UACtC,MAAMC,QAAQ,GAAGD,MAAM,CAACE,YAAP,EAAqBC,kBAAtC;UACA,OAAO;YACLC,WAAW,EAAEJ,MAAM,CAACK,IADf;YAELC,KAAK,EAAEN,MAAM,CAACM,KAFT;YAGLL,QAAQ,EAAEA,QAAQ,EAAEF,GAAV,CAAeQ,CAAD,KAAQ;cAAEC,CAAC,EAAED,CAAC,CAACC,CAAP;cAAUC,CAAC,EAAEF,CAAC,CAACE;YAAf,CAAR,CAAd;UAHL,CAAP;QAKD,CAPe,CAAhB;QASA,OAAOX,OAAP;MACD,CAfD,CAeE,OAAOY,KAAP,EAAc;QACdC,OAAO,CAACD,KAAR,CAAc,QAAd,EAAwBA,KAAxB;QACA,OAAO,EAAP;MACD;IAnBwC;EAoB1C;;AArBkC;;;mBAAxBrB;AAAwB;;;QAAxBA;EAAwBuB;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MCbrCC;MACAA;MAECA;MACAA,+BAA8D,CAA9D,EAA8D,KAA9D,EAA8D,CAA9D,EAA8D,CAA9D,EAA8D,IAA9D,EAA8D,CAA9D;MAGGA;MACDA;MACAA;MAAsCA;MAAqFA;MAEtHA,gCAAsD,EAAtD,EAAsD,KAAtD,EAAsD,CAAtD,EAAsD,EAAtD,EAAsD,KAAtD,EAAsD,CAAtD,EAAsD,EAAtD,EAAsD,OAAtD,EAAsD,EAAtD,EAAsD,EAAtD,EAAsD,KAAtD,EAAsD,EAAtD;MAKoBA;MAAAA;MACAA;MACAA;MACAA;MAAAA;MACAA;MAAuCA;MAA2CA;MAEtFA;MAAkCA;QAAA,OAAUC,0BAAV;MAAgC,CAAhC;MAAlCD;MAIRA,+BAAiC,EAAjC,EAAiC,MAAjC;MACUA;MAAkCA;MAMhDA,6BAAK,EAAL,EAAK,QAAL,EAAK,EAAL;MACYA;QAAA,OAASC,mBAAT;MAAwB,CAAxB;MAERD;MACJA;;;;MAlBqBA;MAAAA","names":["vision","CustomerSupportComponent","detectObjectsInImage","imageUrl","client","ImageAnnotatorClient","objectLocalizationResult","objectLocalization","objects","localizedObjectAnnotations","results","map","object","vertices","boundingPoly","normalizedVertices","description","name","score","v","x","y","error","console","selectors","decls","vars","consts","template","i0","ctx"],"sourceRoot":"","sources":["C:\\Users\\mario\\Desktop\\AutoDocIA\\src\\app\\customer-support\\customer-support.component.ts","C:\\Users\\mario\\Desktop\\AutoDocIA\\src\\app\\customer-support\\customer-support.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { Configuration, OpenAIApi } from 'openai';\r\nimport { environment } from 'src/environments/environment';\r\nimport { gptModels } from '../models/constants';\r\nimport { ChatWithBot, ResponseModel } from '../models/gpt-response';\r\nimport { VisionService } from '../vision.service';\r\nimport * as vision from '@google-cloud/vision';\r\n\r\n@Component({\r\n  selector: 'app-customer-support',\r\n  templateUrl: './customer-support.component.html',\r\n  styleUrls: ['./customer-support.component.css']\r\n})\r\nexport class CustomerSupportComponent {\r\n  async detectObjectsInImage(imageUrl: string) {\r\n    try {\r\n      const client = new vision.ImageAnnotatorClient();\r\n      const [objectLocalizationResult] = await client.objectLocalization(imageUrl);\r\n      const objects = objectLocalizationResult.localizedObjectAnnotations;\r\n\r\n      const results = objects?.map((object) => {\r\n        const vertices = object.boundingPoly?.normalizedVertices;\r\n        return {\r\n          description: object.name,\r\n          score: object.score,\r\n          vertices: vertices?.map((v) => ({ x: v.x, y: v.y })),\r\n        };\r\n      });\r\n\r\n      return results;\r\n    } catch (error) {\r\n      console.error('Error:', error);\r\n      return [];\r\n    }\r\n  }\r\n}\r\n","<link href=\"https://unpkg.com/tailwindcss@^2/dist/tailwind.min.css\" rel=\"stylesheet\">\r\n<div class=\"relative min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8 bg-gray-500 bg-no-repeat bg-cover relative items-center\"\r\n\tstyle=\"background-image: url(https://images.unsplash.com/photo-1621243804936-775306a8f2e3?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80);\">\r\n\t<div class=\"absolute bg-black opacity-60 inset-0 z-0\"></div>\r\n\t<div class=\"sm:max-w-lg w-full p-10 bg-white rounded-xl z-10\">\r\n\t\t<div class=\"text-center\">\r\n\t\t\t<h2 class=\"mt-5 text-3xl font-bold text-gray-900\">\r\n\t\t\t\tSelección de imagen!\r\n\t\t\t</h2>\r\n\t\t\t<p class=\"mt-2 text-sm text-gray-400\">Seleccione una imagen para analizar y obtener la solución al problema que representa.</p>\r\n\t\t</div>\r\n        <form class=\"mt-8 space-y-3\" action=\"#\" method=\"POST\">\r\n            <div class=\"grid grid-cols-1 space-y-2\">\r\n                <div class=\"flex items-center justify-center w-full\">\r\n                    <label class=\"flex flex-col rounded-lg border-4 border-dashed w-full h-60 p-10 group text-center\">\r\n                        <div class=\"h-full w-full text-center flex flex-col items-center justify-center items-center  \">\r\n                            <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"w-10 h-10 text-blue-400 group-hover:text-blue-600\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12\" />\r\n                            </svg>\r\n                            <img [src]=\"selectedImage\" height=\"200\">\r\n                            <p class=\"pointer-none text-gray-500 \">Seleccione una imagen desde su computadora.</p>\r\n                        </div>\r\n                        <input type=\"file\" class=\"hidden\" (change)=\"onFileSelected($event)\">\r\n                    </label>\r\n                </div>\r\n            </div>\r\n                <p class=\"text-sm text-gray-300\">\r\n                    <span>Tipo de arcivo soportado: Imágenes</span>\r\n                </p><!--\r\n                <div class=\"form-group\"> \r\n                    <h3 style=\"font-family: 'Times New Roman', Times, serif; font-size: 25px;\">Contexto de imagen:</h3><hr>\r\n                    <textarea rows=\"3\" placeholder=\"Escriba aquí el contexto para obtener una respuesta más acertada...\" class=\"form-control\" cols=\"6\"></textarea>\r\n                </div>-->\r\n            <div>\r\n                <button (click)=\"detectObjects()\" class=\"my-5 w-full flex justify-center bg-blue-500 text-gray-100 p-4  rounded-full tracking-wide\r\n                            font-semibold  focus:outline-none focus:shadow-outline hover:bg-blue-600 shadow-lg cursor-pointer transition ease-in duration-300\">\r\n                Analizar Imagen\r\n            </button>\r\n            </div>\r\n        </form>\r\n\t</div>\r\n</div>\r\n\r\n"]},"metadata":{},"sourceType":"module"}